#include "ST080Utils.h"	// this is where the FreeRTOS stuff (functions and variable are too)
#include "composer.h"	//composer mode functionalities
//#include "freestyle.h" //freestyle mode functionalities not yet implemented
//#include "playback.h"  //playback mode functionalities not yet implemented

// define task priorities
#define COMPOSER_TASK_PRIORITY 2
#define PLAYBACK_TASK_PRIORITY 2
#define FREESTYLE_TASK_PRIORITY 2

// define task stack sizes
#define COMPOSER_STACK_SIZE 128
#define PLAYBACK_STACK_SIZE 128
#define FREESTYLE_STACK_SIZE 128


// ============================================================================
int main(void) {

	/* Create Tasks */
	xTaskCreate(vComposerTask, (signed char * ) "Composer Task", LED_STACK_SIZE, NULL,
			LED_TASK_PRIORITY, NULL);

	xTaskCreate(vPlaybackTask, (signed char * ) "Playback Task", BUTTON_STACK_SIZE,
						NULL, BUTTON_TASK_PRIORITY, NULL);

	xTaskCreate(vFreestyleTask, (signed char * ) "Freestyle Task", BUTTON_STACK_SIZE,
				NULL, BUTTON_TASK_PRIORITY, NULL);

	vTaskStartScheduler(); // This should never return.
	// Will only get here if there was insufficient memory to create
	// the idle task.
	while(1);
}
